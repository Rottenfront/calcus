# Calcus

Функциональный язык программирования

## Семантика

Язык фокусируется на лямбда-исчислении, поэтому главной единицей является лямбда-выражение.

На данной стадии в языке существуют только лямбда-выражения, целые числа, дробные числа и булевы значения.
Используется утиная типизация, что пока что не должно создавать проблем, так как в языке нет никаких комплексных типов, методов, и он не компилируем.

## Синтаксис

### Функции

Определение

```
func_name arg1 arg2 arg3... = <expr>;
```

Точки с запятой используются для разделения функций.

Вызов

```
func_name arg1 arg2 arg3...
```

Вызов функции имеет больший приоритет, чем бинарные операторы, что будет далее описано в разделе "Операторы".

Если функция возвращает лямбда-выражение, то после конца вызова основных аргументов можно сразу же вызвать это лямбда-выражение.

### Лямбда-выражения

Определение

```
lambda arg1 arg2 arg3... -> <expr>
```

Лямбда-выражения могут быть вложены друг в друга. Функции могут возвращать лямбда-выражения.

На данный момент лямбды не имеют доступ к внутренним переменным, их можно туда передать как аргументы.

### Литералы

Пока что кроме чисел и булевых значений, никаких литералов нет.

Для упрощения все числа являются дробными, потом это может быть изменено.

Числа

```
1234567890
1234567890.0987654321
6.022140857e23
1.8e-14
```

Булевые значения

```
true
false
```

### Условные выражения

```
if <expr> then <expr> else <expr>
```

### Операторы

#### Унарные операторы:

- `-`
- `!`

Унарные операторы имеют более высокий приоритет, чем вызов функции, и, соотвественно, более высокий приоритет, чем бинарные операторы.

#### Бинарные операторы

1 уровень приоритета:

- `|>` - pipe operator. Он передает результат левой части следующим аргументом функции правой части.

2 уровень приоритета:

- `*`
- `/`

3 уровень приоритета:

- `+`
- `-`

4 уровень приоритета:

- `==`
- `!=`
- `<`
- `>`
- `<=`
- `>=`

5 уровень приоритета:

- `and`

6 уровень приоритета:

- `or`

7 уровень приоритета:

- `xor`

Итоговый приоритет:

- Унарные операторы
- Вызов функции
- Бинарные операторы

## Примеры

Функция нахождения остатка целочисленного деления:

```
rem a b = a - (a / b) * b;
```

Функция Фибоначчи:

```
fib n = if n == 0 then 0
    else if n == 1 then 1
    else fib (n - 1) + fib (n - 2);
```

Линейная функция Фибоначчи:

```
fib n a b = if n == 0 then b
    else fib (n - 1) b (a + b);
```

Экспоненциальное возведение в степень:

```
pow x p = if p == 0 then 1
    else if rem p 2 == 0 then pow (x * x) (p / 2)
    else pow (x * x) (p / 2) * x;
```

Алгоритм Евклида для нахождения НОД:

```
gcd a b = if a == 0 or b == 0 then a + b
    else if a > b then gcd (rem a b) b
    else gcd a (rem b a);
```
